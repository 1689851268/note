# Vitest é…ç½®è¯¦è§£

## é…ç½®æ–‡ä»¶ç±»å‹

### 1. ç‹¬ç«‹é…ç½®æ–‡ä»¶

```typescript
// vitest.config.ts - ç‹¬ç«‹çš„ Vitest é…ç½®æ–‡ä»¶
// ä» vitest/config å¯¼å…¥é…ç½®å‡½æ•° (ä¸“é—¨ç”¨äº Vitest)
import { defineConfig } from "vitest/config";

// å¯¼å‡ºé»˜è®¤é…ç½®å¯¹è±¡
export default defineConfig({
    // test å±æ€§: åŒ…å«æ‰€æœ‰ Vitest ç›¸å…³çš„é…ç½®é€‰é¡¹
    // è¿™æ˜¯ Vitest é…ç½®çš„æ ¹èŠ‚ç‚¹, æ‰€æœ‰æµ‹è¯•ç›¸å…³è®¾ç½®éƒ½åœ¨è¿™é‡Œ
    test: {
        // åœ¨è¿™é‡Œæ·»åŠ å„ç§ Vitest é…ç½®é€‰é¡¹
        // ä¾‹å¦‚: environment, include, exclude, coverage ç­‰
    },
});
```

### 2. ä¸ Vite é›†æˆ

```typescript
// vite.config.ts - å°† Vitest é…ç½®é›†æˆåˆ° Vite é…ç½®ä¸­
// è¿™è¡Œ TypeScript æŒ‡ä»¤å¼•å…¥ Vitest çš„ç±»å‹å®šä¹‰
// è®©ç¼–è¾‘å™¨èƒ½å¤Ÿä¸º test é…ç½®æä¾›æ™ºèƒ½æç¤º
/// <reference types="vitest/config" />

// ä» vite å¯¼å…¥é…ç½®å‡½æ•° (ä¸æ˜¯ä» vitest/config)
import { defineConfig } from "vite";

export default defineConfig({
    // Vite ç›¸å…³é…ç½®: æ„å»ºå·¥å…·ã€å¼€å‘æœåŠ¡å™¨ã€æ’ä»¶ç­‰
    plugins: [], // Vite æ’ä»¶æ•°ç»„

    // Vitest é…ç½®: ç›´æ¥æ·»åŠ åˆ° Vite é…ç½®å¯¹è±¡ä¸­
    // å¥½å¤„: Vitest å¯ä»¥ç»§æ‰¿ Vite çš„æ’ä»¶å’Œè®¾ç½® (å¦‚è·¯å¾„åˆ«åã€ç¯å¢ƒå˜é‡ç­‰)
    test: {
        // æ‰€æœ‰ Vitest é…ç½®é€‰é¡¹éƒ½å†™åœ¨è¿™é‡Œ
        // ä¸ç‹¬ç«‹é…ç½®æ–‡ä»¶çš„ test éƒ¨åˆ†å®Œå…¨ç›¸åŒ
    },
});
```

### 3. é…ç½®åˆå¹¶

```typescript
// vitest.config.ts - åˆå¹¶ç°æœ‰ Vite é…ç½®å’Œ Vitest é…ç½®
// ä» vitest/config å¯¼å…¥é…ç½®å‡½æ•°å’Œåˆå¹¶å‡½æ•°
import { defineConfig, mergeConfig } from "vitest/config";
// å¯¼å…¥ç°æœ‰çš„ Vite é…ç½®
import viteConfig from "./vite.config";

// mergeConfig() ç”¨äºåˆå¹¶ä¸¤ä¸ªé…ç½®å¯¹è±¡
// ç¬¬ä¸€ä¸ªå‚æ•°: åŸºç¡€é…ç½® (ç°æœ‰çš„ Vite é…ç½®)
// ç¬¬äºŒä¸ªå‚æ•°: è¦åˆå¹¶çš„é…ç½® (Vitest ç‰¹å®šé…ç½®)
export default mergeConfig(
    viteConfig, // ç°æœ‰çš„ Vite é…ç½®ä½œä¸ºåŸºç¡€
    defineConfig({
        test: {
            // Vitest ç‰¹å®šé…ç½®
            // è¿™äº›é…ç½®ä¼šä¸ viteConfig ä¸­çš„è®¾ç½®åˆå¹¶
            // å¦‚æœæœ‰å†²çª, è¿™é‡Œçš„é…ç½®ä¼šè¦†ç›– viteConfig ä¸­çš„ç›¸åŒé…ç½®
        },
    })
);
```

## æ ¸å¿ƒé…ç½®é€‰é¡¹è¯¦è§£

### include - æµ‹è¯•æ–‡ä»¶åŒ¹é…

```typescript
test: {
    // include: å®šä¹‰å“ªäº›æ–‡ä»¶ä¼šè¢«è¯†åˆ«ä¸ºæµ‹è¯•æ–‡ä»¶
    // ä½¿ç”¨ glob æ¨¡å¼ (é€šé…ç¬¦æ¨¡å¼) æ¥åŒ¹é…æ–‡ä»¶è·¯å¾„

    // é»˜è®¤åŒ¹é…æ¨¡å¼ - è¦†ç›–å¤§å¤šæ•°å¸¸è§çš„æµ‹è¯•æ–‡ä»¶å‘½å
    include: ["**/*.{test,spec}.?(c|m)[jt]s?(x)"];
    // è§£æ: åŒ¹é…ä»»æ„ç›®å½•ä¸‹çš„ .test.* æˆ– .spec.* æ–‡ä»¶
    // æ”¯æŒ js/ts/jsx/tsx ä»¥åŠ CommonJS(.cjs) å’Œ ES Module(.mjs) æ ¼å¼

    // å¸¸ç”¨è‡ªå®šä¹‰æ¨¡å¼ç¤ºä¾‹:
    include: [
        "**/*.test.js", // åªåŒ¹é…ä»¥ .test.js ç»“å°¾çš„æ–‡ä»¶
        "tests/**/*.js", // åªåŒ¹é… tests ç›®å½•ä¸‹çš„æ‰€æœ‰ .js æ–‡ä»¶
        "src/**/*.{test,spec}.{js,ts,jsx,tsx}", // åŒ¹é… src ç›®å½•ä¸‹çš„æµ‹è¯•æ–‡ä»¶
    ];
}
```

**åŒ¹é…æ¨¡å¼è§£æ:**

-   `**/*` : é€’å½’åŒ¹é…æ‰€æœ‰ç›®å½•
-   `{test,spec}` : æ–‡ä»¶ååŒ…å« test æˆ– spec
-   `?(c|m)` : å¯é€‰çš„ c (CommonJS) æˆ– m (ES Module)
-   `[jt]s` : js æˆ– ts æ‰©å±•å
-   `?(x)` : å¯é€‰çš„ x (JSX/TSX)

### exclude - æ’é™¤æ–‡ä»¶

```typescript
test: {
    exclude: [
        "**/node_modules/**", // é»˜è®¤æ’é™¤
        "**/.git/**", // é»˜è®¤æ’é™¤
        "**/dist/**", // æ„å»ºè¾“å‡º
        "**/coverage/**", // è¦†ç›–ç‡æŠ¥å‘Š
        "**/.vscode/**", // ç¼–è¾‘å™¨é…ç½®
        "**/*.config.js", // é…ç½®æ–‡ä»¶
        "**/*.stories.js", // Storybook æ–‡ä»¶
        "**/mock-data/**", // æ¨¡æ‹Ÿæ•°æ®
    ];
}
```

### environment - æµ‹è¯•ç¯å¢ƒ

```typescript
test: {
    environment: "jsdom"; // 'node' | 'jsdom' | 'happy-dom'
}
```

**ç¯å¢ƒå¯¹æ¯”è¡¨:**

| ç¯å¢ƒ        | ç‰¹ç‚¹          | é€‚ç”¨åœºæ™¯           | DOM API | æ€§èƒ½    | å†…å­˜å ç”¨ |
| ----------- | ------------- | ------------------ | ------- | ------- | -------- |
| `node`      | Node.js åŸç”Ÿ  | åç«¯é€»è¾‘, å·¥å…·å‡½æ•° | âŒ      | ğŸš€ æœ€å¿« | ğŸŸ¢ æœ€ä½  |
| `jsdom`     | å®Œæ•´ DOM æ¨¡æ‹Ÿ | React/Vue ç»„ä»¶     | âœ… å®Œæ•´ | ğŸŒ è¾ƒæ…¢ | ğŸ”´ è¾ƒé«˜  |
| `happy-dom` | è½»é‡ DOM æ¨¡æ‹Ÿ | ç®€å•å‰ç«¯æµ‹è¯•       | âœ… éƒ¨åˆ† | âš¡ å¿«   | ğŸŸ¡ ä¸­ç­‰  |

**ç¯å¢ƒé€‰æ‹©å»ºè®®:**

```typescript
// çº¯é€»è¾‘æµ‹è¯•
environment: "node";

// React/Vue ç»„ä»¶æµ‹è¯•
environment: "jsdom";

// è¿½æ±‚é€Ÿåº¦çš„å‰ç«¯æµ‹è¯•
environment: "happy-dom";
```

### sequence - æ‰§è¡Œé¡ºåºæ§åˆ¶

```typescript
test: {
    // sequence: æ§åˆ¶æµ‹è¯•æ‰§è¡Œçš„é¡ºåºã€æ–¹å¼å’Œè¡Œä¸º
    // è¿™ä¸ªé…ç½®å¯¹æµ‹è¯•æ€§èƒ½å’Œå¯é æ€§æœ‰é‡è¦å½±å“
    sequence: {
        // === å¹¶å‘æ‰§è¡Œæ§åˆ¶ ===
        // concurrent: æ˜¯å¦å…è®¸æµ‹è¯•ç”¨ä¾‹å¹¶å‘æ‰§è¡Œ
        concurrent: true,
        // true:  å¤šä¸ªæµ‹è¯•åŒæ—¶è¿è¡Œ, é€Ÿåº¦æ›´å¿«ä½†å¯èƒ½æœ‰å‰¯ä½œç”¨å†²çª
        // false: æµ‹è¯•æŒ‰é¡ºåºé€ä¸ªæ‰§è¡Œ, æ›´å®‰å…¨ä½†é€Ÿåº¦è¾ƒæ…¢
        //
        // ä½¿ç”¨å»ºè®®:
        // - ç‹¬ç«‹çš„å•å…ƒæµ‹è¯•: æ¨è true (æå‡é€Ÿåº¦)
        // - æœ‰å…±äº«çŠ¶æ€çš„æµ‹è¯•: å»ºè®® false (é¿å…å†²çª)
        // - æ•°æ®åº“æ“ä½œæµ‹è¯•: å»ºè®® false (é¿å…æ•°æ®ç«äº‰)

        // === éšæœºåŒ–æ‰§è¡Œé¡ºåº ===
        // shuffle: æ˜¯å¦éšæœºæ‰“ä¹±æµ‹è¯•æ‰§è¡Œé¡ºåº
        // ç›®çš„: å‘ç°æµ‹è¯•é—´çš„éšè—ä¾èµ–å…³ç³»
        shuffle: true,  // ç®€å•å¼€å¯: éšæœºåŒ–æ‰€æœ‰æµ‹è¯•å’Œæ–‡ä»¶é¡ºåº

        // æˆ–è€…ä½¿ç”¨å¯¹è±¡å½¢å¼è¿›è¡Œç»†ç²’åº¦æ§åˆ¶:
        shuffle: {
            files: true,    // éšæœºåŒ–æµ‹è¯•æ–‡ä»¶çš„æ‰§è¡Œé¡ºåº
            tests: false    // ä¿æŒå•ä¸ªæ–‡ä»¶å†…æµ‹è¯•ç”¨ä¾‹çš„åŸå§‹é¡ºåº
        },
        //
        // ä¸ºä»€ä¹ˆéœ€è¦éšæœºåŒ–?
        // - å¥½çš„æµ‹è¯•åº”è¯¥ç›¸äº’ç‹¬ç«‹, ä¸ä¾èµ–æ‰§è¡Œé¡ºåº
        // - éšæœºåŒ–å¯ä»¥æš´éœ²æµ‹è¯•é—´çš„æ„å¤–ä¾èµ–
        // - å¸®åŠ©å‘ç° "åªæœ‰åœ¨ç‰¹å®šé¡ºåºä¸‹æ‰èƒ½é€šè¿‡" çš„è„†å¼±æµ‹è¯•
        //
        // ä½¿ç”¨åœºæ™¯:
        // - å¼€å‘é˜¶æ®µ: å»ºè®®å¼€å¯, å°½æ—©å‘ç°é—®é¢˜
        // - CI/CD: å»ºè®®å¼€å¯, ç¡®ä¿æµ‹è¯•ç¨³å®šæ€§
        // - è°ƒè¯•é˜¶æ®µ: å¯ä»¥å…³é—­, ä¾¿äºé‡ç°é—®é¢˜

        // === éšæœºç§å­è®¾ç½® ===
        // seed: éšæœºåŒ–çš„ç§å­å€¼, ç”¨äºæ§åˆ¶ "éšæœº" çš„å…·ä½“è¡Œä¸º
        seed: 12345,
        //
        // ä½œç”¨åŸç†:
        // - ç›¸åŒçš„ç§å­ = ç›¸åŒçš„ "éšæœº" é¡ºåº
        // - ä¸åŒçš„ç§å­ = ä¸åŒçš„éšæœºé¡ºåº
        //
        // å®é™…ç”¨é€”:
        // - é‡ç°é—®é¢˜: ä½¿ç”¨ç›¸åŒç§å­å¯ä»¥é‡ç°ç‰¹å®šçš„æµ‹è¯•é¡ºåº
        // - è°ƒè¯•å¤±è´¥: å½“éšæœºé¡ºåºå¯¼è‡´æµ‹è¯•å¤±è´¥æ—¶, è®°å½•ç§å­å€¼ä¾¿äºè°ƒè¯•
        // - CI ä¸€è‡´æ€§: åœ¨ CI ç¯å¢ƒä¸­ä½¿ç”¨å›ºå®šç§å­ç¡®ä¿ç»“æœå¯é‡ç°
        //
        // æœ€ä½³å®è·µ:
        // - å¼€å‘æ—¶: å¯ä»¥ä½¿ç”¨éšæœºç§å­ (ä¸è®¾ç½®æˆ–è®¾ä¸ºéšæœºå€¼)
        // - è°ƒè¯•æ—¶: ä½¿ç”¨å›ºå®šç§å­é‡ç°é—®é¢˜
        // - ç”Ÿäº§ CI: è€ƒè™‘ä½¿ç”¨åŸºäºæ—¥æœŸæˆ–æäº¤å“ˆå¸Œçš„ç§å­

        // === é’©å­å‡½æ•°æ‰§è¡Œæ–¹å¼ ===
        // hooks: æ§åˆ¶ beforeEach, afterEach ç­‰é’©å­çš„æ‰§è¡Œé¡ºåº
        hooks: 'stack',     // å¯é€‰å€¼: 'stack' | 'list' | 'parallel'
        //
        // 'stack' (é»˜è®¤, æ¨è):
        //   - beforeEach: æŒ‰å®šä¹‰é¡ºåºæ‰§è¡Œ (çˆ¶ â†’ å­)
        //   - afterEach: æŒ‰ç›¸åé¡ºåºæ‰§è¡Œ (å­ â†’ çˆ¶)
        //   - æ¨¡æ‹Ÿå‡½æ•°è°ƒç”¨æ ˆçš„è¡Œä¸º, ç¬¦åˆç›´è§‰
        //   - é€‚åˆå¤§å¤šæ•°åœºæ™¯
        //
        // 'list':
        //   - æ‰€æœ‰é’©å­éƒ½æŒ‰å®šä¹‰é¡ºåºæ‰§è¡Œ
        //   - beforeEach å’Œ afterEach éƒ½æ˜¯ çˆ¶ â†’ å­
        //   - è¡Œä¸ºæ›´ç›´è§‚ä½†å¯èƒ½ä¸ç¬¦åˆæ¸…ç†é€»è¾‘
        //
        // 'parallel':
        //   - åŒçº§é’©å­å¹¶å‘æ‰§è¡Œ
        //   - é€Ÿåº¦æœ€å¿«ä½†å¯èƒ½æœ‰å‰¯ä½œç”¨
        //   - åªåœ¨ç¡®ä¿é’©å­é—´æ— ä¾èµ–æ—¶ä½¿ç”¨
        //
        // ç¤ºä¾‹åœºæ™¯:
        // describe('çˆ¶çº§', () => {
        //   beforeEach(() => console.log('çˆ¶ setup'))
        //   afterEach(() => console.log('çˆ¶ cleanup'))
        //
        //   describe('å­çº§', () => {
        //     beforeEach(() => console.log('å­ setup'))
        //     afterEach(() => console.log('å­ cleanup'))
        //     it('æµ‹è¯•', () => {})
        //   })
        // })
        //
        // 'stack' æ¨¡å¼è¾“å‡º: çˆ¶setup â†’ å­setup â†’ å­cleanup â†’ çˆ¶cleanup
        // 'list' æ¨¡å¼è¾“å‡º:  çˆ¶setup â†’ å­setup â†’ çˆ¶cleanup â†’ å­cleanup

        // === Setup æ–‡ä»¶æ‰§è¡Œæ–¹å¼ ===
        // setupFiles: æ§åˆ¶å¤šä¸ª setup æ–‡ä»¶çš„æ‰§è¡Œæ–¹å¼
        setupFiles: 'parallel'  // å¯é€‰å€¼: 'list' | 'parallel'
        //
        // 'parallel' (æ¨è):
        //   - å¤šä¸ª setup æ–‡ä»¶åŒæ—¶æ‰§è¡Œ
        //   - é€Ÿåº¦æ›´å¿«, é€‚åˆç‹¬ç«‹çš„åˆå§‹åŒ–ä»»åŠ¡
        //   - ä¾‹å¦‚: å…¨å±€å˜é‡è®¾ç½®ã€ç¯å¢ƒé…ç½®ç­‰
        //
        // 'list':
        //   - setup æ–‡ä»¶æŒ‰é¡ºåºé€ä¸ªæ‰§è¡Œ
        //   - é€‚åˆæœ‰ä¾èµ–å…³ç³»çš„åˆå§‹åŒ–ä»»åŠ¡
        //   - ä¾‹å¦‚: æ•°æ®åº“è¿æ¥ â†’ æ•°æ®åˆå§‹åŒ– â†’ æƒé™è®¾ç½®
        //
        // é…ç½®ç¤ºä¾‹:
        // setupFiles: [
        //   './test/setup/globals.js',     // è®¾ç½®å…¨å±€å˜é‡
        //   './test/setup/database.js',   // æ•°æ®åº“åˆå§‹åŒ–
        //   './test/setup/mocks.js'       // Mock è®¾ç½®
        // ]
    }
}
```

**å¹¶å‘æ‰§è¡Œå¯¹æ¯”:**

```typescript
// concurrent: false (ä¸²è¡Œ)
// test1 â†’ test2 â†’ test3
// æ—¶é—´: 100ms + 200ms + 150ms = 450ms

// concurrent: true (å¹¶è¡Œ)
// test1 || test2 || test3
// æ—¶é—´: max(100ms, 200ms, 150ms) = 200ms
```

### coverage - è¦†ç›–ç‡é…ç½®

```typescript
test: {
    coverage: {
        // è¦†ç›–ç‡æä¾›è€…
        provider: 'v8',  // 'v8' | 'istanbul' | 'custom'

        // å¯ç”¨è¦†ç›–ç‡
        enabled: true,

        // æŠ¥å‘Šè¾“å‡ºç›®å½•
        reportsDirectory: './coverage',

        // æŠ¥å‘Šæ ¼å¼
        reporter: [
            'text',      // æ§åˆ¶å°è¾“å‡º
            'html',      // HTML æŠ¥å‘Š
            'json',      // JSON æ•°æ®
            'lcov',      // LCOV æ ¼å¼
            'clover'     // Clover XML
        ],

        // åŒ…å«æ–‡ä»¶
        include: ['src/**/*.{js,ts,jsx,tsx}'],

        // æ’é™¤æ–‡ä»¶
        exclude: [
            '**/*.d.ts',
            '**/*.config.*',
            '**/*.stories.*',
            '**/test/**',
            '**/tests/**'
        ],

        // è¦†ç›–ç‡é˜ˆå€¼
        thresholds: {
            lines: 80,        // è¡Œè¦†ç›–ç‡
            functions: 75,    // å‡½æ•°è¦†ç›–ç‡
            branches: 70,     // åˆ†æ”¯è¦†ç›–ç‡
            statements: 80,   // è¯­å¥è¦†ç›–ç‡
            perFile: true     // æ¯ä¸ªæ–‡ä»¶éƒ½è¦è¾¾åˆ°é˜ˆå€¼
        },

        // å…¶ä»–é€‰é¡¹
        clean: true,              // è¿è¡Œå‰æ¸…ç†
        cleanOnRerun: true,       // é‡è¿è¡Œæ—¶æ¸…ç†
        skipFull: false,          // ä¸è·³è¿‡ 100% è¦†ç›–çš„æ–‡ä»¶
        reportOnFailure: true,    // å¤±è´¥æ—¶ä¹Ÿç”ŸæˆæŠ¥å‘Š
        allowExternal: false      // ä¸æ”¶é›†å¤–éƒ¨æ–‡ä»¶è¦†ç›–ç‡
    }
}
```

**Provider å¯¹æ¯”:**

```typescript
// v8 - æ¨è (åŸºäº Chrome V8)
provider: "v8";
// âœ… é€Ÿåº¦å¿«, å†…å­˜å ç”¨ä½
// âœ… åŸç”Ÿæ”¯æŒ ES æ¨¡å—
// âŒ æŸäº›è¾¹ç¼˜æƒ…å†µå¯èƒ½ä¸å‡†ç¡®

// istanbul - ä¼ ç»Ÿæ–¹æ¡ˆ
provider: "istanbul";
// âœ… æˆç†Ÿç¨³å®š, å‡†ç¡®åº¦é«˜
// âœ… ä¸°å¯Œçš„é…ç½®é€‰é¡¹
// âŒ é€Ÿåº¦è¾ƒæ…¢, å†…å­˜å ç”¨é«˜
```

## é«˜çº§é…ç½®

### å¤šé¡¹ç›®é…ç½®

```typescript
export default defineConfig({
    test: {
        projects: [
            // glob æ¨¡å¼åŒ¹é…
            "packages/*",

            // å†…è”é…ç½®
            {
                test: {
                    name: "frontend",
                    include: ["src/components/**/*.test.{js,jsx}"],
                    environment: "jsdom",
                    setupFiles: ["./test-setup/frontend.js"],
                },
            },
            {
                test: {
                    name: "backend",
                    include: ["src/api/**/*.test.js"],
                    environment: "node",
                    setupFiles: ["./test-setup/backend.js"],
                },
            },
        ],
    },
});
```

### æµè§ˆå™¨æµ‹è¯•é…ç½®

```typescript
test: {
    // browser: æµè§ˆå™¨æµ‹è¯•é…ç½® - åœ¨çœŸå®æµè§ˆå™¨ç¯å¢ƒä¸­è¿è¡Œæµ‹è¯•
    // ä¸ jsdom/happy-dom ä¸åŒ, è¿™æ˜¯åœ¨çœŸå®æµè§ˆå™¨ä¸­æ‰§è¡Œæµ‹è¯•
    browser: {
        // === åŸºç¡€å¯ç”¨é…ç½® ===
        // enabled: æ˜¯å¦å¯ç”¨æµè§ˆå™¨æµ‹è¯•æ¨¡å¼
        enabled: true,
        // true:  æµ‹è¯•åœ¨çœŸå®æµè§ˆå™¨ä¸­è¿è¡Œ
        // false: ä½¿ç”¨ Node.js ç¯å¢ƒæˆ– DOM æ¨¡æ‹Ÿå™¨
        //
        // æµè§ˆå™¨æµ‹è¯•çš„ä¼˜åŠ¿:
        // - 100% çœŸå®çš„æµè§ˆå™¨ç¯å¢ƒ
        // - å®Œæ•´çš„æµè§ˆå™¨ API æ”¯æŒ
        // - çœŸå®çš„æ¸²æŸ“å’Œäº¤äº’è¡Œä¸º
        // - å¯ä»¥æµ‹è¯•æµè§ˆå™¨ç‰¹å®šåŠŸèƒ½ (å¦‚æ–‡ä»¶ä¸Šä¼ ã€å‰ªè´´æ¿ç­‰)
        //
        // æµè§ˆå™¨æµ‹è¯•çš„åŠ£åŠ¿:
        // - å¯åŠ¨é€Ÿåº¦è¾ƒæ…¢
        // - èµ„æºå ç”¨æ›´å¤š
        // - éœ€è¦å®‰è£…æµè§ˆå™¨é©±åŠ¨

        // === æµè§ˆå™¨é©±åŠ¨æä¾›è€… ===
        // provider: é€‰æ‹©æµè§ˆå™¨è‡ªåŠ¨åŒ–å·¥å…·
        provider: 'playwright',  // å¯é€‰å€¼: 'playwright' | 'webdriverio'
        //
        // 'playwright' (æ¨è):
        //   - ç°ä»£åŒ–çš„æµè§ˆå™¨è‡ªåŠ¨åŒ–å·¥å…·
        //   - æ”¯æŒ Chromium, Firefox, Safari
        //   - é€Ÿåº¦å¿«, API ç®€æ´
        //   - å†…ç½®ç­‰å¾…å’Œé‡è¯•æœºåˆ¶
        //   - æ›´å¥½çš„è°ƒè¯•æ”¯æŒ
        //
        // 'webdriverio':
        //   - åŸºäº W3C WebDriver æ ‡å‡†
        //   - ç”Ÿæ€ç³»ç»Ÿæˆç†Ÿ
        //   - æ”¯æŒæ›´å¤šæµè§ˆå™¨å’Œç§»åŠ¨ç«¯
        //   - æ’ä»¶ä¸°å¯Œ
        //   - å­¦ä¹ æ›²çº¿è¾ƒé™¡

        // === æµè§ˆå™¨å®ä¾‹é…ç½® ===
        // instances: å®šä¹‰å¤šä¸ªæµè§ˆå™¨å®ä¾‹, å¯ä»¥åŒæ—¶åœ¨ä¸åŒæµè§ˆå™¨ä¸­æµ‹è¯•
        instances: [
            {
                // browser: æŒ‡å®šæµè§ˆå™¨ç±»å‹
                browser: 'chromium',  // å¯é€‰: 'chromium' | 'firefox' | 'webkit' | 'chrome' | 'edge'

                // setupFile: è¯¥æµè§ˆå™¨å®ä¾‹ä¸“ç”¨çš„è®¾ç½®æ–‡ä»¶
                // åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å¯ä»¥é…ç½®è¯¥æµè§ˆå™¨ç‰¹æœ‰çš„åˆå§‹åŒ–é€»è¾‘
                setupFile: './chromium-setup.js'
                // ç¤ºä¾‹ç”¨é€”:
                // - è®¾ç½® Chromium ç‰¹å®šçš„å¯åŠ¨å‚æ•°
                // - å®‰è£…æµè§ˆå™¨æ‰©å±•
                // - é…ç½®ç‰¹å®šçš„ mock æˆ–ç¯å¢ƒå˜é‡
                // - è®¾ç½®æµè§ˆå™¨ç‰¹å®šçš„å…¨å±€å˜é‡
            },
            {
                // ç¬¬äºŒä¸ªæµè§ˆå™¨å®ä¾‹ - Firefox
                browser: 'firefox',

                // headless: è¯¥å®ä¾‹æ˜¯å¦ä»¥æ— å¤´æ¨¡å¼è¿è¡Œ
                // true:  ä¸æ˜¾ç¤ºæµè§ˆå™¨çª—å£ (é€‚åˆ CI ç¯å¢ƒ)
                // false: æ˜¾ç¤ºæµè§ˆå™¨çª—å£ (é€‚åˆæœ¬åœ°è°ƒè¯•)
                headless: true

                // å…¶ä»–å¯é€‰é…ç½®:
                // setupFile: './firefox-setup.js',  // Firefox ä¸“ç”¨è®¾ç½®
                // viewport: { width: 1920, height: 1080 },  // è¦†ç›–å…¨å±€è§†å£è®¾ç½®
                // launch: {  // æµè§ˆå™¨å¯åŠ¨é€‰é¡¹
                //     args: ['--disable-web-security'],  // å¯åŠ¨å‚æ•°
                //     timeout: 30000  // å¯åŠ¨è¶…æ—¶
                // }
            }

            // å¯ä»¥æ·»åŠ æ›´å¤šæµè§ˆå™¨å®ä¾‹:
            // {
            //     browser: 'webkit',  // Safari å†…æ ¸
            //     headless: false,
            //     setupFile: './safari-setup.js'
            // }
        ],

        // === å…¨å±€æµè§ˆå™¨é…ç½® ===
        // headless: å…¨å±€æ— å¤´æ¨¡å¼è®¾ç½® (å¯è¢«å®ä¾‹é…ç½®è¦†ç›–)
        // è¿™é‡Œä½¿ç”¨ç¯å¢ƒå˜é‡è¿›è¡Œæ™ºèƒ½é…ç½®:
        // - CI ç¯å¢ƒ: æ— å¤´æ¨¡å¼ (æå‡æ€§èƒ½, é¿å…æ˜¾ç¤ºé—®é¢˜)
        // - æœ¬åœ°å¼€å‘: æœ‰å¤´æ¨¡å¼ (ä¾¿äºè°ƒè¯•å’Œè§‚å¯Ÿ)
        headless: process.env.CI,

        // viewport: æµè§ˆå™¨è§†å£å¤§å°è®¾ç½®
        // å½±å“é¡µé¢çš„åˆå§‹æ¸²æŸ“å°ºå¯¸å’Œå“åº”å¼å¸ƒå±€æµ‹è¯•
        viewport: {
            width: 1280,   // è§†å£å®½åº¦ (åƒç´ )
            height: 720,   // è§†å£é«˜åº¦ (åƒç´ )
        },
        // å¸¸ç”¨è§†å£å°ºå¯¸å‚è€ƒ:
        // - æ¡Œé¢: 1920x1080, 1280x720, 1366x768
        // - å¹³æ¿: 768x1024, 1024x768
        // - æ‰‹æœº: 375x667, 414x896, 360x640

        // === æˆªå›¾å’Œè°ƒè¯•é…ç½® ===
        // screenshotFailures: æµ‹è¯•å¤±è´¥æ—¶æ˜¯å¦è‡ªåŠ¨æˆªå›¾
        screenshotFailures: true,
        // true:  å¤±è´¥æ—¶è‡ªåŠ¨ä¿å­˜æˆªå›¾, ä¾¿äºè°ƒè¯•
        // false: ä¸è‡ªåŠ¨æˆªå›¾, å‡å°‘å­˜å‚¨ç©ºé—´å ç”¨
        //
        // æˆªå›¾çš„ç”¨é€”:
        // - å¿«é€Ÿå®šä½ UI é—®é¢˜
        // - åœ¨ CI ä¸­æŸ¥çœ‹å¤±è´¥æ—¶çš„é¡µé¢çŠ¶æ€
        // - è®°å½•æµ‹è¯•æ‰§è¡Œæ—¶çš„å®é™…æ¸²æŸ“ç»“æœ
        // - ç”¨äºç”Ÿæˆæµ‹è¯•æŠ¥å‘Š

        // screenshotDirectory: æˆªå›¾ä¿å­˜ç›®å½•
        screenshotDirectory: './screenshots'
        // ç›®å½•ç»“æ„é€šå¸¸å¦‚ä¸‹:
        // screenshots/
        // â”œâ”€â”€ chromium/
        // â”‚   â”œâ”€â”€ test-name-1.png
        // â”‚   â””â”€â”€ test-name-2.png
        // â””â”€â”€ firefox/
        //     â”œâ”€â”€ test-name-1.png
        //     â””â”€â”€ test-name-2.png

        // === å…¶ä»–å¸¸ç”¨é…ç½®é€‰é¡¹ ===
        isolate: true,  // æ¯ä¸ªæµ‹è¯•æ˜¯å¦åœ¨ç‹¬ç«‹çš„é¡µé¢ä¸Šä¸‹æ–‡ä¸­è¿è¡Œ
        slowMo: 100,    // æ“ä½œé—´çš„å»¶è¿Ÿæ—¶é—´ (æ¯«ç§’, ä¾¿äºè§‚å¯Ÿ)
        video: true,    // æ˜¯å¦å½•åˆ¶æµ‹è¯•è§†é¢‘
        trace: true,    // æ˜¯å¦å¯ç”¨ Playwright çš„è·Ÿè¸ªåŠŸèƒ½

        // é«˜çº§é…ç½®ç¤ºä¾‹:
        api: {
            port: 63315,  // API æœåŠ¡ç«¯å£
            host: 'localhost'  // API æœåŠ¡ä¸»æœº
        },

        // è‡ªå®šä¹‰å¯åŠ¨é€‰é¡¹:
        launch: {
            devtools: true,  // æ‰“å¼€å¼€å‘è€…å·¥å…·
            timeout: 60000   // æµè§ˆå™¨å¯åŠ¨è¶…æ—¶
        }
    }
}
```

### æ€§èƒ½ä¼˜åŒ–é…ç½®

```typescript
test: {
    // === çº¿ç¨‹æ± é…ç½® ===
    // pool: é€‰æ‹©æµ‹è¯•æ‰§è¡Œçš„è¿›ç¨‹/çº¿ç¨‹æ¨¡å¼
    // è¿™æ˜¯å½±å“æµ‹è¯•æ€§èƒ½çš„æœ€é‡è¦é…ç½®ä¹‹ä¸€
    pool: 'threads',  // å¯é€‰å€¼: 'threads' | 'forks' | 'vmThreads' | 'vmForks'
    //
    // 'threads' (æ¨è, é»˜è®¤):
    //   - ä½¿ç”¨ Worker Threads å¹¶è¡Œæ‰§è¡Œæµ‹è¯•
    //   - å†…å­˜å…±äº«æ•ˆç‡é«˜, å¯åŠ¨é€Ÿåº¦å¿«
    //   - é€‚åˆå¤§å¤šæ•°é¡¹ç›®, æ€§èƒ½æœ€ä½³
    //   - æ”¯æŒå…±äº«å†…å­˜å’Œ Atomics ä¼˜åŒ–
    //
    // 'forks':
    //   - ä½¿ç”¨å­è¿›ç¨‹ (child_process.fork) æ‰§è¡Œæµ‹è¯•
    //   - è¿›ç¨‹é—´å®Œå…¨éš”ç¦», æ›´å®‰å…¨ä½†å¼€é”€å¤§
    //   - é€‚åˆæœ‰å†…å­˜æ³„æ¼é£é™©çš„æµ‹è¯•
    //   - å¯åŠ¨è¾ƒæ…¢, å†…å­˜å ç”¨æ›´å¤š
    //
    // 'vmThreads':
    //   - åœ¨ VM ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ Worker Threads
    //   - æä¾›æ›´å¥½çš„éš”ç¦»æ€§, ä½†æ€§èƒ½ç•¥ä½
    //   - é€‚åˆéœ€è¦ä¸¥æ ¼æ²™ç®±ç¯å¢ƒçš„æµ‹è¯•
    //
    // 'vmForks':
    //   - åœ¨ VM ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨å­è¿›ç¨‹
    //   - æœ€é«˜éš”ç¦»æ€§, ä½†æ€§èƒ½å¼€é”€æœ€å¤§
    //   - é€‚åˆå®‰å…¨è¦æ±‚æé«˜çš„åœºæ™¯

    // === çº¿ç¨‹æ± è¯¦ç»†é…ç½® ===
    // poolOptions: é’ˆå¯¹é€‰å®š pool ç±»å‹çš„è¯¦ç»†é…ç½®
    poolOptions: {
        // threads æ¨¡å¼çš„é…ç½®é€‰é¡¹
        threads: {
            // maxThreads: æœ€å¤§å¹¶å‘çº¿ç¨‹æ•°
            // å½±å“æµ‹è¯•çš„å¹¶è¡Œåº¦å’Œç³»ç»Ÿèµ„æºå ç”¨
            maxThreads: 4,
            // é…ç½®å»ºè®®:
            // - CPU å¯†é›†å‹æµ‹è¯•: CPU æ ¸å¿ƒæ•°
            // - I/O å¯†é›†å‹æµ‹è¯•: CPU æ ¸å¿ƒæ•° * 2
            // - å†…å­˜å—é™ç¯å¢ƒ: é€‚å½“å‡å°‘
            // - CI ç¯å¢ƒ: é€šå¸¸è®¾ä¸º 2-4
            //
            // åŠ¨æ€é…ç½®ç¤ºä¾‹:
            // maxThreads: process.env.CI ? 2 : require('os').cpus().length

            // minThreads: æœ€å°ä¿æŒçš„çº¿ç¨‹æ•°
            // é¿å…é¢‘ç¹åˆ›å»º/é”€æ¯çº¿ç¨‹çš„å¼€é”€
            minThreads: 1,
            // è®¾ç½®åŸåˆ™:
            // - å°é¡¹ç›®: 1 (èŠ‚çœèµ„æº)
            // - å¤§é¡¹ç›®: 2-3 (ä¿æŒå“åº”æ€§)
            // - æŒç»­é›†æˆ: 1-2 (èµ„æºæœ‰é™)

            // useAtomics: æ˜¯å¦ä½¿ç”¨ Atomics è¿›è¡Œçº¿ç¨‹é—´é€šä¿¡
            // è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„æ€§èƒ½ä¼˜åŒ–é€‰é¡¹
            useAtomics: true
            // true (æ¨è):
            //   - ä½¿ç”¨ SharedArrayBuffer å’Œ Atomics API
            //   - çº¿ç¨‹é—´é€šä¿¡æ›´é«˜æ•ˆ
            //   - å‡å°‘åºåˆ—åŒ–/ååºåˆ—åŒ–å¼€é”€
            //   - æ˜¾è‘—æå‡å¤§å‹æµ‹è¯•å¥—ä»¶æ€§èƒ½
            //
            // false:
            //   - ä½¿ç”¨ä¼ ç»Ÿçš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶
            //   - å…¼å®¹æ€§æ›´å¥½ä½†æ€§èƒ½è¾ƒä½
            //   - é€‚åˆä¸æ”¯æŒ SharedArrayBuffer çš„ç¯å¢ƒ
            //
            // æ³¨æ„äº‹é¡¹:
            // - éœ€è¦æµè§ˆå™¨æ”¯æŒ SharedArrayBuffer
            // - æŸäº›å®‰å…¨ç­–ç•¥å¯èƒ½ç¦ç”¨æ­¤åŠŸèƒ½
            // - Node.js ç‰ˆæœ¬éœ€è¦ >= 16.0.0

            // === å…¶ä»–çº¿ç¨‹é…ç½®é€‰é¡¹ ===
            singleThread: false,  // æ˜¯å¦å¼ºåˆ¶å•çº¿ç¨‹æ‰§è¡Œ
            isolate: true,        // æ¯ä¸ªæµ‹è¯•æ–‡ä»¶æ˜¯å¦åœ¨ç‹¬ç«‹ä¸Šä¸‹æ–‡ä¸­è¿è¡Œ

            // å†…å­˜ç®¡ç†:
            maxMemoryLimitBeforeRecycle: 100,  // MB, çº¿ç¨‹å›æ”¶å†…å­˜é˜ˆå€¼

            // è¶…æ—¶é…ç½®:
            execArgv: [],  // ä¼ é€’ç»™ worker çš„ Node.js å‚æ•°
            env: {},       // worker ç¯å¢ƒå˜é‡
        }

        // å¦‚æœä½¿ç”¨ 'forks' æ¨¡å¼, é…ç½®ç¤ºä¾‹:
        // forks: {
        //     maxForks: 4,
        //     minForks: 1,
        //     isolate: true,
        //     execArgv: ['--max-old-space-size=4096']  // å¢åŠ å†…å­˜é™åˆ¶
        // }
    },

    // === æ–‡ä»¶æ‰«æä¼˜åŒ– ===
    // dir: é™åˆ¶æµ‹è¯•æ–‡ä»¶çš„æ‰«æç›®å½•
    // é€šè¿‡å‡å°‘æ‰«æèŒƒå›´æ¥æå‡å¯åŠ¨é€Ÿåº¦
    dir: './src',
    // ä¼˜åŒ–æ•ˆæœ:
    // - å‡å°‘æ–‡ä»¶ç³»ç»Ÿéå†æ—¶é—´
    // - é¿å…æ‰«æä¸å¿…è¦çš„ç›®å½• (å¦‚ node_modules, dist)
    // - ç‰¹åˆ«é€‚åˆå¤§å‹é¡¹ç›®æˆ– monorepo
    //
    // é…ç½®å»ºè®®:
    // - å•ä¸€é¡¹ç›®: './src' æˆ– './lib'
    // - Monorepo: './packages/*/src'
    // - å…¨æ ˆé¡¹ç›®: ['./src', './server']
    //
    // æ³¨æ„äº‹é¡¹:
    // - ç¡®ä¿æ‰€æœ‰æµ‹è¯•æ–‡ä»¶éƒ½åœ¨æŒ‡å®šç›®å½•å†…
    // - å¯ä»¥é…åˆ include/exclude è¿›ä¸€æ­¥ç²¾ç¡®æ§åˆ¶

    // === ç¼“å­˜é…ç½® ===
    // cache: æµ‹è¯•ç»“æœå’Œä¾èµ–åˆ†æçš„ç¼“å­˜è®¾ç½®
    // æ˜¾è‘—æå‡é‡å¤è¿è¡Œçš„é€Ÿåº¦
    cache: {
        // dir: ç¼“å­˜æ–‡ä»¶å­˜å‚¨ç›®å½•
        dir: './node_modules/.vitest'
        // ç¼“å­˜å†…å®¹åŒ…æ‹¬:
        // - æµ‹è¯•æ–‡ä»¶çš„ä¾èµ–å…³ç³»å›¾
        // - æ¨¡å—è½¬æ¢ç»“æœ (TypeScript, JSX ç­‰)
        // - æµ‹è¯•ç»“æœå’Œè¦†ç›–ç‡æ•°æ®
        // - Mock å’Œ stub çš„å…ƒæ•°æ®
        //
        // ç¼“å­˜ç­–ç•¥:
        // - åŸºäºæ–‡ä»¶ä¿®æ”¹æ—¶é—´å’Œå†…å®¹å“ˆå¸Œ
        // - ä¾èµ–å˜æ›´æ—¶è‡ªåŠ¨å¤±æ•ˆ
        // - é…ç½®å˜æ›´æ—¶è‡ªåŠ¨æ¸…ç†
        //
        // æ€§èƒ½æå‡:
        // - é¦–æ¬¡è¿è¡Œ: å»ºç«‹ç¼“å­˜ (ç¨æ…¢)
        // - åç»­è¿è¡Œ: åˆ©ç”¨ç¼“å­˜ (æ˜¾è‘—åŠ é€Ÿ)
        // - å¢é‡æµ‹è¯•: åªè¿è¡Œå˜æ›´ç›¸å…³çš„æµ‹è¯•
        //
        // ç¼“å­˜ç®¡ç†:
        // - è‡ªåŠ¨æ¸…ç†è¿‡æœŸç¼“å­˜
        // - å¯é€šè¿‡ --no-cache ç¦ç”¨
        // - å¯é€šè¿‡ vitest --run --reporter=verbose --cache.dir=./custom-cache è‡ªå®šä¹‰
    }

    // === å…¶ä»–æ€§èƒ½ä¼˜åŒ–é€‰é¡¹ ===
    //
    // å¹¶å‘æ§åˆ¶:
    maxConcurrency: 10,  // æœ€å¤§å¹¶å‘æµ‹è¯•æ•° (è·¨æ–‡ä»¶)

    // æ–‡ä»¶ç›‘å¬ä¼˜åŒ–:
    watchExclude: ['**/node_modules/**', '**/dist/**'],

    // ä¾èµ–ä¼˜åŒ–:
    deps: {
        external: ['lodash'],  // å¤–éƒ¨ä¾èµ–, ä¸è¿›è¡Œè½¬æ¢
        inline: ['@testing-library/react']  // å†…è”ä¾èµ–, å¼ºåˆ¶è½¬æ¢
    },

    // è½¬æ¢ä¼˜åŒ–:
    esbuild: {
        target: 'node14'  // é™ä½è½¬æ¢å¤æ‚åº¦
    },

    // å†…å­˜ä¼˜åŒ–:
    forceRerunTriggers: ['**/package.json/**'],  // å¼ºåˆ¶é‡æ–°è¿è¡Œçš„è§¦å‘å™¨

    // ç½‘ç»œä¼˜åŒ– (ç”¨äºæµè§ˆå™¨æµ‹è¯•):
    testTimeout: 10000,  // å•ä¸ªæµ‹è¯•è¶…æ—¶æ—¶é—´
    hookTimeout: 10000   // é’©å­å‡½æ•°è¶…æ—¶æ—¶é—´
}
```

### æŠ¥å‘Šå™¨é…ç½®

```typescript
test: {
    reporters: [
        'default',               // é»˜è®¤æ§åˆ¶å°æŠ¥å‘Š
        'verbose',               // è¯¦ç»†è¾“å‡º
        'json',                  // JSON æ ¼å¼
        'junit',                 // JUnit XML (CI å‹å¥½)
        'html'                   // HTML æŠ¥å‘Š
    ],

    // è¾“å‡ºæ–‡ä»¶é…ç½®
    outputFile: {
        json: './test-results.json',
        junit: './junit.xml',
        html: './test-report.html'
    }
}
```

## å®é™…é¡¹ç›®é…ç½®ç¤ºä¾‹

### React é¡¹ç›®é…ç½®

```typescript
// vitest.config.ts
import { defineConfig } from "vitest/config";
import react from "@vitejs/plugin-react";

export default defineConfig({
    plugins: [react()],
    test: {
        environment: "jsdom",
        setupFiles: ["./src/test/setup.ts"],
        include: ["src/**/*.{test,spec}.{js,jsx,ts,tsx}"],
        exclude: ["**/node_modules/**", "**/dist/**", "**/*.stories.*"],
        coverage: {
            provider: "v8",
            reporter: ["text", "html"],
            include: ["src/**/*.{js,jsx,ts,tsx}"],
            exclude: ["**/*.d.ts", "**/*.stories.*", "**/test/**"],
            thresholds: {
                lines: 80,
                functions: 80,
                branches: 80,
                statements: 80,
            },
        },
    },
});
```

### Vue é¡¹ç›®é…ç½®

```typescript
// vitest.config.ts
import { defineConfig } from "vitest/config";
import vue from "@vitejs/plugin-vue";

export default defineConfig({
    plugins: [vue()],
    test: {
        environment: "happy-dom", // Vue æ¨èä½¿ç”¨ happy-dom
        include: ["src/**/*.{test,spec}.{js,ts}", "tests/**/*.{js,ts}"],
        globals: true,
        coverage: {
            provider: "v8",
            include: ["src/**/*.{js,ts,vue}"],
            exclude: ["**/*.d.ts"],
        },
    },
});
```

### Node.js é¡¹ç›®é…ç½®

```typescript
// vitest.config.ts
export default defineConfig({
    test: {
        environment: "node",
        include: ["src/**/*.test.js", "tests/**/*.js"],
        sequence: {
            concurrent: true,
        },
        coverage: {
            provider: "v8",
            include: ["src/**/*.js"],
            exclude: ["src/**/*.config.js"],
            thresholds: {
                lines: 90,
                functions: 90,
                branches: 85,
                statements: 90,
            },
        },
    },
});
```

### å…¨æ ˆé¡¹ç›®é…ç½®

```typescript
export default defineConfig({
    test: {
        projects: [
            {
                test: {
                    name: "frontend",
                    include: ["src/client/**/*.test.{js,jsx,ts,tsx}"],
                    environment: "jsdom",
                    setupFiles: ["./test/frontend-setup.js"],
                },
            },
            {
                test: {
                    name: "backend",
                    include: ["src/server/**/*.test.{js,ts}"],
                    environment: "node",
                    setupFiles: ["./test/backend-setup.js"],
                },
            },
            {
                test: {
                    name: "e2e",
                    include: ["tests/e2e/**/*.test.js"],
                    browser: {
                        enabled: true,
                        provider: "playwright",
                    },
                },
            },
        ],
    },
});
```

## é…ç½®æœ€ä½³å®è·µ

### 1. ç¯å¢ƒå˜é‡æ”¯æŒ

```typescript
// vitest.config.ts
export default defineConfig({
    test: {
        environment: process.env.NODE_ENV === "production" ? "node" : "jsdom",
        coverage: {
            enabled: process.env.CI === "true",
            thresholds: {
                lines: process.env.CI ? 90 : 70,
            },
        },
    },
});
```

### 2. æ¡ä»¶é…ç½®

```typescript
export default defineConfig(({ mode }) => ({
    test: {
        ...(mode === "development" && {
            sequence: { concurrent: false }, // å¼€å‘æ—¶ä¸²è¡Œæ‰§è¡Œä¾¿äºè°ƒè¯•
            reporter: "verbose",
        }),

        ...(mode === "ci" && {
            coverage: { enabled: true },
            reporter: ["default", "junit"],
        }),
    },
}));
```

### 3. é…ç½®å¤ç”¨

```typescript
// test.config.base.ts
export const baseConfig = {
    include: ["**/*.{test,spec}.{js,ts,jsx,tsx}"],
    exclude: ["**/node_modules/**", "**/dist/**"],
    coverage: {
        provider: "v8",
        reporter: ["text", "html"],
    },
};

// vitest.config.ts
import { baseConfig } from "./test.config.base";

export default defineConfig({
    test: {
        ...baseConfig,
        environment: "jsdom", // é¡¹ç›®ç‰¹å®šé…ç½®
    },
});
```

## æ€»ç»“

Vitest çš„é…ç½®ç³»ç»Ÿéå¸¸çµæ´», å…³é”®è¦ç‚¹:

1. **æ–‡ä»¶åŒ¹é…**: ä½¿ç”¨ `include/exclude` ç²¾ç¡®æ§åˆ¶æµ‹è¯•èŒƒå›´
2. **ç¯å¢ƒé€‰æ‹©**: æ ¹æ®æµ‹è¯•å†…å®¹é€‰æ‹©åˆé€‚çš„æ‰§è¡Œç¯å¢ƒ
3. **æ€§èƒ½ä¼˜åŒ–**: åˆç†é…ç½®å¹¶å‘å’Œçº¿ç¨‹æ± æå‡é€Ÿåº¦
4. **è¦†ç›–ç‡**: è®¾ç½®åˆç†çš„é˜ˆå€¼å’ŒæŠ¥å‘Šæ ¼å¼
5. **å¤šé¡¹ç›®**: ä½¿ç”¨ projects é…ç½®æ”¯æŒå¤æ‚é¡¹ç›®ç»“æ„

å»ºè®®ä»ç®€å•é…ç½®å¼€å§‹, æ ¹æ®é¡¹ç›®éœ€æ±‚é€æ­¥æ·»åŠ é«˜çº§åŠŸèƒ½.
