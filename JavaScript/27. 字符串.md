# 字符串的创建

1.  通过字面量创建字符串：

```js
const str = 'superman';
console.log(typeof str); // string
```

2.  通过构造函数创建字符串实例：

```js
const str = new String('superman');
console.log(typeof str); // object
```

<br><br>

# 字符串的属性

字符串是特殊的数组，具有 `length` 属性，且可以像数组一样通过 [下标] 来获取对应的字符。

```js
const str = 'superman';
console.log(str.length); // 8
console.log(str[0]); // s
```

<br><br>

# String.prototype 上的方法

通过字符串字面量调用方法时，JS 会通过 [字符串的包装类] 将 [字符串字面量] 转为 [字符串实例]，所以方法的效果都会作用在该实例上，不会对字符串字面量产生任何影响。

```js
'abc'.toString();
// 相当于
new String('abc').toString();
```

> 标有 `*` 表示数组也有同名方法

<br>

## charAt - 寻值

用于获取指定**索引(下标)**对应的字符：

```js
const str = 'superman';
console.log(str.charAt(1)); // u
console.log(str[1]); // u
```

与使用 `[]` 获取的不同之处：

-   使用 `charAt(X)`：`X` > `length-1` 时，返回空字符串
-   使用 `[x]`：`X` > `length-1` 时，返回 `undefined`

```js
const str = 'superman';
console.log(str.charAt(10)); // ''
console.log(str[10]); // undefined
```

<br>

## charCodeAt - 寻编码值

用于获取指定**索引(下标)**对应的字符的编码：

```js
const str = 'superman';
console.log(str.charCodeAt(1)); // 117
```

如果索引 > `length-1`，则返回 `NaN`：

```js
const str = 'superman';
console.log(str.charCodeAt(10)); // NaN
```

常见编码值：0-9 → 48-57、A-Z → 65-90、a-z → 97-122...

<br>

## search - 寻址

**从前往后**寻找指定字符串**第 1 次出现**的位置 ( 只能有 1 个参数 )：

```js
const str = 'asdffdsa';
console.log(str.search('d')); // 2
```

找到，则返回其 `下标`；找不到，则返回 `-1`。

<br>

## replace - 替换 (删除)

用于字符串的替换：

```js
str.replace(oldSubStr, newSubStr);
```

在 `str` 中，**从前往后**找**第 1 个**子字符串 `oldSubStr`，并用 `newSubStr` 替换。

```js
const str = 'superman';
console.log(str.replace('man', 'women')); // superwomen
```

<br>

如果在 `str` 中没有找到 `oldSubStr`，则返回原 `str`：

```js
const str = 'superman';
console.log(str.replace('son', 'women')); // superman
```

<br>

`newSubStr` 为空字符串时，可以实现对子字符串的删除：

```js
const str = 'superman';
console.log(str.replace('man', '')); // super
```

<br>

第 1 参数可以是正则表达式 `reg`、 第 2 参数可以是回调函数 `cb`：

```js
const str = 'superman';
const newStr = str.replace(/man/g, match => match + '!!!');
console.log('newStr', newStr); // newStr superman!!!
```

回调函数 `cb` 的第 1 个参数为匹配到的子字符串。

> 可以使用 `replaceAll(oldStr, newStr)` 进行全部替换。

<br>

## split - 分割

用指定分割符把 `str` 分割开，并以**数组**的形式返回：

```js
const str = '1, 2, 3';
console.log(str.split(', ')); // (3) ["1", "2", "3"]
```

> 和数组的 `join` 方法对应

<br>

如果不传入参数，则把 `str` 作为数组的一项：

```js
const str = '1, 2, 3';
console.log(str.split()); // ["1, 2, 3"]
```

<br>

**如果传入空字符串`''`，则按字符分割**：

```js
const str = '1, 2, 3';
console.log(str.split('')); // (7) ["1", ",", " ", "2", ",", " ", "3"]
```

<br>

如果分割符在 str 的头部，则切出来的第一个项为空字符串。

如果分割符在 str 的尾部，则切出来的最后一项为空字符串。

```js
const str = '1, 2, 3';
console.log(str.split('1')); // (2) ["", ", 2, 3"]
console.log(str.split('3')); // (2) ["1, 2, ", ""]
```

那如果分隔符同时在 str 的头部和尾部，则：

```javascript
const str = '.';
console.log(str.split('.')); // (2) ["", ""]
```

<br>

## toLowerCase - 小写

用于将英文字符转成小写：

```js
const str = 'SUPERMAN';
console.log(str.toUpperCase()); // superman
```

<br>

## toUpperCase - 大写

用于将英文字符转成大写：

```js
const str = 'superman';
console.log(str.toUpperCase()); // SUPERMAN
```

<br>

试着自己封装这个方法：

```js
function myUpper(str) {
    str = str || '';
    let newStr = '';
    for (let i = 0; i < str.length; i++) {
        const charCode = str.charCodeAt(i);
        if (97 <= charCode && charCode <= 122) {
            newStr += String.fromCharCode(charCode - 32);
        } else {
            newStr += str[i];
        }
    }
    return newStr;
}
```

<br>

## trim - 去空格

用于去除字符串两边的空格：

```js
const str = '    superman    ';
console.log(str); //     superman
console.log(str.trim()); // superman
```

可用 `trimLeft()`去除字符串左边的空格、`trimRight()`去除字符串右边的空格。

<br>

试着封装方法去除所有的空格：

```js
function myTrim(str) {
    str = str || '';
    const arr = str.split('');
    let newStr = '';
    for (let i = 0; i < arr.length; i++) {
        if (arr[i] != ' ') {
            newStr += arr[i];
        }
    }
    return newStr;
}
```

```js
function myTrim(str) {
    for (let i = str.length - 1; i >= 0; i--) {
        if (str[i] == ' ') {
            str = str.replace(str[i], '');
        }
    }
    return str;
}
myTrim(str);
```

<br>

## substring - 截取

```js
str.substring(start, end);
```

接收 0 ~ 2 个参数：

1.  `start`：开始截取的索引 ( 包含 )，默认为 0
2.  `end`：结束截取的索引 ( 不包含 )，默认为 length

```js
const str = 'superman';
console.log(str.substring()); // superman
console.log(str.substring(5)); // man
console.log(str.substring(0, 5)); // super
```

<br>

## slice - 截取 \*

用法和 `substring` 一样，区别在于：

1. `slice` 支持负数作为参数（**负数 → length + 负数**） <br>
   `substring()` 不支持负数作为参数（**负数 → 0**）

```js
const str = 'superman';
console.log(str.substring(0, 5)); // super
console.log(str.slice(-8, -3)); // super
```

```js
const str = 'superman';
console.log(str.substring(-1)); // superman → str.substring(0)
console.log(str.substring(-5, -1)); // 空字符串 → str.substring(0, 0)
```

2. `substring()` 会自动从小的参数索引开始截取，到大的参数索引结束

```js
const str = 'superman';
console.log(str.substring(0, 5)); // super
console.log(str.substring(5, 0)); // super
```

<br>

## indexOf - 寻址 \*

**从前往后**查询指定字符串**第 1 次出现**的位置：

-   接收 1 ~ 2 个参数：查找的元素、开始查找的下标
-   找到，则返回 `下标`；找不到，则返回 `-1`

```js
const str = 'asdffdsa';
console.log(str.indexOf('d')); // 2 → 从前往后查找字符串 d 第一次出现的位置
```

```js
const str = 'asdffdsa';
console.log(str.indexOf('d', 6)); // -1 → 从下标 6 开始，向后查找字符串 d 第一次出现的位置
```

对于空字符串 `''`，`indexOf` 返回的是 `0`：

```js
'asd'.indexOf(''); // 0
```

<br>

## lastIndexOf - 寻址 \*

**从后往前**查询指定字符串**第一次出现**的位置：

1.  接收 1 ~ 2 个参数：查找的元素、开始查找的下标
2.  找到，则返回 `下标`；找不到，则返回 `-1`

```js
const str = 'asdffdsa';
console.log(str.lastIndexOf('d')); // 5 → 从后往前查找字符串 d 第一次出现的位置
```

```js
const str = 'asdffdsa';
console.log(str.lastIndexOf('d', 3)); // 2 → 从下标 3 开始，向前查找字符串 d 第一次出现的位置
```

对于空字符串 `''`，`lastIndexOf` 返回的是 `str.length`：

```js
'asd'.indexOf(''); // 0
```

<br>

## concat - 拼接 \*

用于字符串的拼接，与 `+` 等效：

-   接收 1 ~ n 个参数

```js
const str = 'superman';
console.log(str.concat(' and', ' you')); // superman and you
console.log(str + ' and' + ' you'); // superman and you
```

<br><br>

# String 上的方法

## fromCharCode

通过 [字符编码] 获取对应的 [字符]：

```js
const str = String.fromCharCode(110);
console.log(str); // n
```

<br><br>

# 练一练

逆序输出字符串：

```js
const str = 'superman';
let newStr = '';

for (let index = str.length - 1; index >= 0; index--) {
    newStr += str[index];
}

console.log(str); // superman
console.log(newStr); // namrepus
```

```js
const str = 'superman';
const newStr = str.split('').reverse().join('');
console.log(newStr); // namrepus
```

<br><br>

# String.prototype 上的方法 (ES6)

## includes \*

是否含有参数字符串，返回布尔值。

```js
str.include(substr[, num]);
```

`substr`：查询的字符串；`num`：开始查询的下标，默认为 `0`。

```js
const str = 'apple banana';
console.log(str.indexOf('apple')); // 0

// 从下标为 3 的位置开始查询
console.log(str.includes('apple', 3)); // false
```

<br>

## startsWith

是否以参数字符串为前缀，返回布尔值。

```js
str.startsWith(substr[, num]);
```

`substr`：查询的字符串；`num`：开始查询的下标，默认为 `0`。

```js
const str = 'http://www.baidu.com';
str.startsWith('http'); // true
str.startsWith('https'); // false

// 第 2 参数为开始查询的下标，在此位置上是否以参数字符串开头
str.startsWith('www', 7); // true
```

<br>

## endsWith

是否以参数字符串为后缀，返回布尔值。

```
str.endsWith(substr[, num]);
```

`substr`：查询的字符串；`num`：前几个字符是否以参数字符串结尾。

```js
const str = 'http://www.baidu.com';
str.endsWith('com'); // true
str.endsWith('cn'); // false

// str 的前16个字符是否是以 'baidu' 结尾的
str.endsWith('baidu', 16); // true
```

<br>

## repeat

重复 `num` 次 `str`，`num` 为重复的次数，不能 < `0`。

```js
str.repeat(num);
```

```js
const str = 'superman';
const reStr = str.repeat(2);
console.log(reStr); // supermansuperman
```

<br>

参数注意事项：

1. 参数为 `NaN` 等同于 `0`，`repeat(0)` 返回空字符串 `""`
2. 可以简单地认为参数值会先通过 `parseInt()` 的转化，即：
    1. 如果参数是字符串，则会隐式转换成数字
    2. 如果参数是正小数，会向下取整
    3. 如果参数在 `0` ~ `-1` 之间，等同于 `0`
    4. 如果 `参数 <= -1` / `= Infinity`，会报错

<br>

## padStart

添加前缀，返回添加后的字符串。

```js
str.padStart(num[, pStr]);
```

`num`：添加后的长度；`pStr`：添加的字符串，默认为空格。

```js
let str = 'su';
let newStr = str.padStart(5, '666per');
console.log(newStr); // 666su
```

<br>

参数注意事项：

1. 如果 `str.length >= num`，则返回 `str`。
2. 如果 `str.length + pStr.length > num`，会截去超出的 `pStr`。

<br>

我们可以通过 `length` 属性，添加任意长度的前缀：

```js
let str = 'su';
let padStr = '666per'; // 前缀就可以随意改变啦
let newStr = str.padStart(str.length + padStr.length, padStr);
console.log(newStr); // 666persu
```

<br>

## padEnd

添加后缀，返回添加后的字符串。

```
str.padEnd(num, pStr);
```

`num`：填充后的长度；`pStr`：用于填充的字符串。

```js
let str = 'super';
let padStr = 'man';
let newStr = str.padEnd(str.length + padStr.length, padStr);
console.log(newStr); // superman
```

注意事项同 `padStart`。

<br>
