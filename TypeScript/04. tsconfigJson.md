# tsconfig.json

-   tsconfig.json 是 TS 编译器的配置文件，TS 编译器会根据该文件的配置项，对代码进行编译
-   与其他 JSON 文件不同的是，tsconfig.json 文件内可以写注释
-   注意：**要先写 TS 文件，再创建 tsconfig.json 文件**。否则 tsconfig.json 文件内会报错 - "在配置文件 … 中找不到任何输入"

<br>

**① `include` - 用于指定哪些 TS 文件需要被编译**

接收一个数组，数组元素是 [路径字符串]

```json
"include": ["./src/**/*"] // ** 表示所有 [目录]、 * 表示所有 [文件]
```

<br>

**② `exclude` - 不需要被编译的文件目录**

接收一个数组，数组元素是 [路径字符串]

```json
"include": ["./src/**/*"],
"exclude": ["./src/exclude/*"]
```

<br>

**③ `extends` - 定义被继承的配置文件**

接收一个字符串，为指定配置文件的路径（可以不写后缀）

```json
"extends": "./config/base" // 当前配置文件中, 会自动包含 config/base.json 的所有配置信息
```

<br>

**④ `files` - 指定需要编译的文件**

接收一个数组，元素为需要编译的 [文件路径]

```json
"files": ["index.ts", "parser.ts"]
```

只有需要编译的文件很少时才会用到

<br>

**⑤ `compilerOptions` - 配置 TS 的编译细节**

该配置项有很多的子配置项，可往下看~

<br><br>

# compilerOptions 配置项

1.  **`rootDir` - 设置根目录**

```ts
"compilerOptions": { "rootDir": "./src" } // 默认为 "./"
```

<br>

2.  **`outDir` - 指定编译后文件所在的目录**

```json
"compilerOptions": { "outDir": "./dist" } // 默认为 "./"
```

<br>

3.  **`target` - 为编译后的 JS 语法版本**

```ts
"compilerOptions": { "target": "es5" } // 默认为 "es2016"
```

如果想查看配置项可以填写什么值，可以写个错误的值，即可在抛出的错误中查看到可以填写的值：`es3`、`es5`、`es6`、`es2015`、`es2016`、……、`es2022`、`esnext`

<br>

4.  **`noEmitOnError` - 有错误时，是否生成 JS 文件**

-   `true` - 有错误时，不生成 JS 文件
-   `false` - 不论有没有错误，都生成 JS 文件（默认）

```ts
"compilerOptions": { "noEmitOnError": true }
```

<br>

5.  **`noEmit` - 是否生成 JS 文件**

-   `true` - 不生成 JS 文件
-   `false` - 生成 JS 文件（默认）

```json
"compilerOptions": { "noEmit": false }
```

该配置项一般用于检查语法错误：仅编译 TS 文件，不生成 JS 文件

<br>

6.  **`module` - 指定要使用的模块化规范**

```json
"compilerOptions": { "module": "commonjs" } // 默认为 "commonjs"
```

可以写个错误的值，即可在抛出的错误中查看到可填入的值：`none`、`commonjs`、`amd`、`system`、`umd`、`es6`、`es2015`、`es2020`、`es2022`、`esnext`、`node16`、`nodenext`

<br>

7.  **`allowJs` & `checkJs` - 是否 [编译] JS 文件 & 是否为编译后的 JS 代码 [检查] 代码规范**

```js
"compilerOptions": {
    "allowJs": false, // 默认为 false, 即不编译 JS 文件
    "checkJs": false // 默认为 false, 即不检查编译后的 JS 代码规范
}
```

<br>

8.  **`removeComments` - 是否移除注释**

```json
"compilerOptions": { "removeComments": false } // 默认为 false, 即不移除注释
```

<br>

9.  **`outFile` - 将编译后的 JS 代码合并为一个 JS 文件**

```json
"compilerOptions": { "outFile": "./dist/app.js" }
```

设置 `outFile` 后，所有在全局作用域下的代码会被 [编译] & [合并] 到同一个文件中。

如果 compilerOptions.module 为 `system` / `amd`，则所有模块代码也会被 [编译] & [合并] 到同一个文件中。

注意：`outFile` 只有在 module 为 None、System、AMD 时才能使用。不能用于 CommonJS 或 ES6 模块的打包。

<br>

10. **`skipLibCheck` - 是否跳过 node_modules 目录的检查**

```json
"compilerOptions": { "skipLibCheck": false } // 默认为 true, 即跳过 node_modules 目录的检查
```

<br><br>

# Type Checking

1.  **`alwaysStrict` - 编译后的文件是否使用严格模式**

```json
"compilerOptions": { "alwaysStrict": false } // 默认为 false, 即不使用严格模式
```

对于有模块代码的 JS 文件，默认就是 [严格模式]，此时无需再设置 `"alwaysStrict": true`

<br>

2.  **`noImplicitAny` - 不允许隐式的 any 类型**

```json
"compilerOptions": { "noImplicitAny": true } // 默认为 false, 即允许隐式的 any 类型
```

<br>

3.  **`strictNullChecks` - 检查 [空值]**

```ts
"compilerOptions": { "strictNullChecks": true } // 默认为 false, 即不检查 [空值] - eg: null、undefined
```

配置为 true 后，如果有变量的值可能为 [空值]，则直接飘红

```ts
let box1 = document.getElementById("box1"); // box1 为 [空值]
box1.addEventListener("click", () => {
    // 这里会直接飘红
    console.log("click box1");
});
```

需要对变量 `box1` 做判断，确保不是 [空值]，才不会飘红

```ts
let box1 = document.getElementById("box1");
box1 &&
    box1.addEventListener("click", () => {
        // 这里使用 [短路算法]
        console.log("click box1");
    });
```

开启 `strictNullChecks` 后，也不能将 `null` / `undefined` 赋值给其他类型的变量（默认情况下是可以的）

```ts
let num: number = null; // 直接飘红
let str: string = undefined;
```

<br>

4.  **`noImplicitThis` - 不允许不明确类型的 `this`**

```ts
"compilerOptions": { "noImplicitThis": true } // 默认为 false
```

此时，函数里面的 `this` 类型不明确的话，会直接飘红

```ts
function fun() {
    console.log(this);
}
```

需要为 `this` 指定类型，可以做如下修改：

```ts
function fun(this: any) {
    console.log(this);
} // 指定 this 的类型为 any
```

```ts
function fun(this: Window) {
    console.log(this);
} // 指定 this 为 Window
```

<br>

5.  **`strict` - 所有严格检查的总开关**

设置 `strict` === 同时设置 `alwaysStrict`、`noImplicitAny`、`noImplicitThis`、`strictNullChecks`... 等所有的 type-checking options

```ts
"compilerOptions": { "strict": true } // 默认为 true
```

<br>
